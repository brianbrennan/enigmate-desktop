function mapFileTree(a){if(fs.lstatSync(a).isDirectory()){a+="\\";var b=fs.readdirSync(a),c={};c.path=a,c.type="dir",c.files=[];for(var d=0;d<b.length;d++)c.files.push(mapFileTree(a+b[d]));return c}var c={};return c.path=a,c.type="file",c}function listFiles(a){if("file"==a.type)return"<li>"+a.path+"</li>";for(var b='<li class="dir">'+a.path+"<ul>",c=0;c<a.files.length;c++)b+=listFiles(a.files[c]);return b+="</ul></li>"}function loadFile(a){loading=!0;var b,c=new Number(a);fs.readFile(FILE_PATH+files[c],function(a,c){b=a?a:c.toString(),active_file=b,s(".main-view .empty").css("display","none"),s(".main-view .content pre").innerHtml(b);var d=s("pre").innerHtml()[0];s(".main-view .content pre").innerHtml(d.replace(/^(.*)$/gm,'<span class="line">$1</span>')),loading=!1})}var remote=require("remote"),fs=require("fs"),Enigma=require("enigma.js"),e=new Enigma({sequence:"ascii",rotorSettings:"Welcome ToTheJugleWeGot99Problems",spaces:!0}),FILE_PATH="./app/files/",files=[],active_file,loading=!1,maxed=!1;s("#close-window").on("click",function(a){var b=remote.getCurrentWindow();b.close()}),s("#maximize-window").on("click",function(a){var b=remote.getCurrentWindow();maxed?(b.unmaximize(),maxed=!1):(b.maximize(),maxed=!0)}),s("#minimize-window").on("click",function(a){var b=remote.getCurrentWindow();b.minimize()}),s("#encrypt-file").on("click",function(a){var b=e.encrypt(active_file);fs.writeFile(FILE_PATH+"/encrypted.ej",b,function(a){a&&console.log(a)})}),s(".sidebar .dir").on("click",function(a){}),s("#decrypt-file").on("click",function(a){var b=e.decrypt(active_file);fs.writeFile(FILE_PATH+"/decrypted.txt",b,function(a){a&&console.log(a)})}),document.addEventListener("dragover",function(a){return a.preventDefault(),!1},!1),document.addEventListener("drop",function(a){return a.preventDefault(),!1},!1);var dropzone=document.getElementById("dropzone");dropzone.ondrop=function(a){for(var b=[],c=0;c<a.dataTransfer.items.length;c++)b.push(a.dataTransfer.items[c].getAsFile()),files.push(mapFileTree(b[c].path));s(".sidebar ul").innerHtml(listFiles(files[0])).css("opacity","1"),s(".dir").on("click",function(a){s(this).hasClass("open")[0]?(this.children[0].style.display="none",this.children[0].style.opacity="0",s(this).removeClass("open")):(this.children[0].style.display="block",this.children[0].style.opacity="1",s(this).addClass("open"))})};